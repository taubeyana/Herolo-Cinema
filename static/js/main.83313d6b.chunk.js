(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(43),i=a.n(o),l=(a(60),a(5)),s=a(6),c=a(8),u=a(7),m=a(9),p=a(10),d=a(54),f=a(11),h=a(26),b=a.n(h),v=function(e){return{type:"ADD_MOVIE",movie:{Title:e.Title,Poster:e.Poster,Year:e.Year,Runtime:e.Runtime,Genre:e.Genre,Director:e.Director,imdbID:e.imdbID}}},E=function(e){return{type:"EDIT_MOVIE",payload:e}},O=function(e){return{type:"DELETE_MOVIE",payload:e}},g=function(e){return{type:"SET_ERRORS",payload:e}},y=function(){return{type:"CLEAR_ERRORS"}},D={moviesList:[],movieInfo:{Title:"",Poster:"",Year:"",Runtime:"",Genre:"",Director:"",imdbID:""},errors:{title:"",year:"",genre:"",runtime:"",director:"",existingMovie:""}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MOVIE":return Object(f.a)({},e,{moviesList:[t.movie].concat(Object(d.a)(e.moviesList)),errorMessage:t.error});case"GET_MOVIE":return Object(f.a)({},e,{movieInfo:t.payload});case"EDIT_MOVIE":return Object(f.a)({},e,{moviesList:e.moviesList.map(function(e){return e.imdbID===t.payload.imdbID?t.payload:e})});case"DELETE_MOVIE":return Object(f.a)({},e,{moviesList:e.moviesList.filter(function(e){return e.imdbID!==t.payload})});case"SET_ERRORS":return Object(f.a)({},e,{errors:Object(f.a)({},t.payload)});case"CLEAR_ERRORS":return Object(f.a)({},e,{errors:{}});default:return e}},j=a(13),T=a(47),C=a(48),k=a(49),N=Object(T.createLogger)(),F=function(){return Object(j.createStore)(R,Object(C.composeWithDevTools)(Object(j.applyMiddleware)(k.a,N)))},I=(a(83),a(14)),M=a(19);I.b.add(M.b,M.a,M.c);a(85),a(87),a(89);var S=a(50),w=function(e){return n.a.createElement("button",{className:e.className?e.className+" btn":"btn",onClick:e.onClick,type:e.type},e.label||null,e.icon?n.a.createElement(S.a,{icon:e.icon}):null)},G=a(51),L=a.n(G),Y=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t={};return this.props.Poster?t.backgroundImage="url(".concat(this.props.Poster,")"):t.backgroundImage="url(".concat(L.a,")"),n.a.createElement("div",{className:"movie-card",style:t},n.a.createElement("div",{className:"movie-details"},n.a.createElement("div",{className:"details-wrapper"},n.a.createElement("label",null," Title: "),n.a.createElement("span",null," ",this.props.Title," ")),n.a.createElement("div",{className:"details-wrapper"},n.a.createElement("label",null," Year: "),n.a.createElement("span",null," ",this.props.Year," ")),n.a.createElement("div",{className:"details-wrapper"},n.a.createElement("label",null," Genre: "),n.a.createElement("span",null," ",this.props.Genre," ")),n.a.createElement("div",{className:"details-wrapper"},n.a.createElement("label",null," Director: "),n.a.createElement("span",null," ",this.props.Director," ")),n.a.createElement("div",{className:"details-wrapper"},n.a.createElement("label",null," Runtime: "),n.a.createElement("span",null," ",this.props.Runtime," ")),n.a.createElement("div",{className:"movie-card-buttons"},n.a.createElement(w,{onClick:function(){return e.props.handleClickOnEdit(e.props.imdbID)},label:"Edit"}),n.a.createElement(w,{onClick:function(){return e.props.onDeleteMovie(e.props.imdbID)},label:"Delete"}))))}}]),t}(r.Component),V=(a(91),a(93),function(e){return n.a.createElement("div",{className:"backdrop",onClick:function(){return e.closeModal()}})}),P=function(e){return e.modalOpen?n.a.createElement(r.Fragment,null,n.a.createElement(V,{closeModal:e.modalClose}),n.a.createElement("div",{className:e.className?e.className+" modal":"modal"},e.children)):null},A=a(52),_=a.n(A),B=(a(95),a(3)),x=a.n(B),q=function(e){var t={};return x.a.isEmpty(e.Title)?t.Title="Required":x.a.isAlpha(x.a.blacklist(e.Title,", ."))?!0===function(e){if(te.getState().moviesList.find(function(t){return t.Title===e}))return!0}(e.Title)&&(t.Title="Movie ".concat(e.Title," already exist.")):t.Title="Title must contain only letters",x.a.isEmpty(e.Year)?t.Year="Required":/(\b(19|[2-9][0-9])\d{2})$/.test(e.Year)||(t.Year="This year should after 1900"),x.a.isEmpty(e.Genre)?t.Genre="Required":x.a.isAlpha(x.a.blacklist(e.Genre,", ."))||(t.Genre="Genre must contain only letters"),x.a.isEmpty(e.Runtime)?t.Runtime="Required":x.a.isInt(e.Runtime)||(t.Runtime="Please provide a runtime in minutes"),x.a.isEmpty(e.Director)?t.Director="Required":x.a.isAlpha(x.a.blacklist(e.Director,", ."))||(t.Director="Director must contain only letters"),t},W=function(e){if(e){var t=/([a-z]|\s)/i;return e.toLowerCase().split("").filter(function(e){return t.test(e)}).join("").split(" ").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join(" ")}},z=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"input-wrapper"},n.a.createElement("label",null," ",this.props.label," "),n.a.createElement("input",{onChange:this.props.handleChange,onBlur:this.props.onBlur,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",type:"text",defaultValue:this.props.defaultValue,disabled:this.props.disabled,ref:this.props.inputRef,name:this.props.name}))}}]),t}(r.Component),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onFormSubmit=function(e){e.preventDefault(),a.props.handleFormSubmit(a.props.movieInfo),void 0===a.props.error&&a.props.onFormCancel()},a.titleFormat=function(e){e.preventDefault(),a.title.current.value=W(a.title.current.value)},a.validateForm=function(e,t){e.preventDefault();var r={Title:a.title.current.value,Year:a.year.current.value,Genre:a.genre.current.value,Runtime:a.runtime.current.value,Director:a.director.current.value},n=q(r);a.props.dispatch(g(n)),0===Object.keys(n).length&&(r.Title=W(a.title.current.value),r.imdbID=_()(),a.props.handleFormSubmit(r),a.props.onFormCancel())},a.title=n.a.createRef(),a.year=n.a.createRef(),a.genre=n.a.createRef(),a.runtime=n.a.createRef(),a.director=n.a.createRef(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(P,{className:"form-modal",modalOpen:this.props.modalOpen,modalClose:this.props.modalClose},n.a.createElement("form",null,n.a.createElement("h1",null," Add a Movie "),n.a.createElement("div",{className:"form-input-fields"},n.a.createElement(z,{onBlur:function(t){return e.titleFormat(t)},label:"Title",inputRef:this.title}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Title," "),n.a.createElement(z,{label:"Year",inputRef:this.year}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Year," "),n.a.createElement(z,{label:"Genre",inputRef:this.genre}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Genre," "),n.a.createElement(z,{label:"Runtime",inputRef:this.runtime}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Runtime," "),n.a.createElement(z,{label:"Director",inputRef:this.director}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Director," "),n.a.createElement(z,{label:"ID",disabled:!0})),n.a.createElement("footer",{className:"form-buttons"},n.a.createElement(w,{className:"save-btn",onClick:function(t){return e.validateForm(t)},label:"Save"}),n.a.createElement(w,{className:"close-btn",onClick:this.props.onFormCancel,icon:"times"}))))}}]),t}(r.Component),U=Object(p.b)(function(e){return{movieInfo:e.movieInfo,errors:e.errors}})(H),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onFormSubmit=function(e){e.preventDefault();var t={Title:a.title.current.value,Year:a.year.current.value,Genre:a.genre.current.value,Runtime:a.runtime.current.value,Director:a.director.current.value,imdbID:a.props.movie.imdbID,Poster:a.props.movie.Poster};a.props.handleFormSubmit(t),a.props.onFormCancel()},a.titleFormat=function(e){e.preventDefault(),a.title.current.value=W(a.title.current.value)},a.validateForm=function(e,t){if(e.preventDefault(),t){var r={Title:a.title.current.value,Year:a.year.current.value,Genre:a.genre.current.value,Runtime:a.runtime.current.value,Director:a.director.current.value},n=q(r);a.props.dispatch(g(n)),0===Object.keys(n).length&&a.onFormSubmit(e)}else a.onFormSubmit(e)},a.title=n.a.createRef(),a.year=n.a.createRef(),a.genre=n.a.createRef(),a.runtime=n.a.createRef(),a.director=n.a.createRef(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(P,{className:"form-modal",modalOpen:this.props.modalOpen,modalClose:this.props.modalClose},n.a.createElement("form",{onSubmit:function(t){return e.onFormSubmit(t)}},n.a.createElement("h1",null," Edit a Movie "),n.a.createElement(z,{onBlur:function(t){return e.titleFormat(t)},label:"Title",defaultValue:this.props.movie.Title,inputRef:this.title}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Title," "),n.a.createElement(z,{label:"Year",defaultValue:this.props.movie.Year,inputRef:this.year}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Year," "),n.a.createElement(z,{label:"Genre",defaultValue:this.props.movie.Genre,inputRef:this.genre}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Genre," "),n.a.createElement(z,{label:"Runtime",defaultValue:this.props.movie.Runtime,inputRef:this.runtime}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Runtime," "),n.a.createElement(z,{label:"Director",defaultValue:this.props.movie.Director,inputRef:this.director}),n.a.createElement("span",{className:"error-message"}," ",this.props.errors.Director," "),n.a.createElement(z,{label:"ID",defaultValue:this.props.movie.imdbID,disabled:!0}),n.a.createElement("footer",{className:"form-buttons"},n.a.createElement(w,{className:"save-btn",onClick:function(t){return e.validateForm(t,!0)},label:"Save"}),n.a.createElement(w,{className:"close-btn",onClick:this.props.onFormCancel,icon:"times"}))))}}]),t}(r.Component),$=Object(p.b)(function(e){return{errors:e.errors}})(J),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleModal=function(){a.setState({modalOpen:!a.state.modalOpen})},a.togglePopup=function(){a.setState({popupOpen:!a.state.popupOpen})},a.onEditMovie=function(e){var t=a.props.moviesList.filter(function(t){return t.imdbID===e}).pop();a.setState({formType:"edit",selectedMovie:t}),a.toggleModal()},a.clearForm=function(){a.props.dispatch(y()),a.toggleModal()},a.handleClickOnDelete=function(e){a.setState({selectedToDelete:e}),a.togglePopup()},a.onFormSubmit=function(e){"edit"===a.state.formType&&a.props.dispatch(E(e)),"add"===a.state.formType&&a.props.dispatch(v(e))},a.confirmDeletion=function(){a.props.dispatch(O(a.state.selectedToDelete)),a.togglePopup()},a.onAddMovie=function(){a.toggleModal(),a.setState({formType:"add"})},a.state={modalOpen:!1,formType:null,selectedMovie:null,popupOpen:!1,selectedToDelete:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(){var e=["se7en","The Silence of the Lambs","The Game","The Whole Nine Yards","The Experiment","The Girl with the Dragon Tattoo","Ice Age","House","The Green Mile","American History X","Breaking Bad","Limitless","Braveheart","The Shawshank Redemption","Unthinkable","Pulp Fiction","The Dictator","Django Unchained","Crazy, Stupid, Love.","Hard Candy"];return function(t){e.forEach(function(e){b.a.get("https://www.omdbapi.com/?t=".concat(e,"&apikey=33a73e97")).then(function(e){t(v(e.data))}).catch(function(e){return console.log(e)})})}}())}},{key:"renderForm",value:function(){switch(this.state.formType){case"add":return n.a.createElement(U,{modalOpen:this.state.modalOpen,modalClose:this.clearForm,onFormCancel:this.clearForm,handleFormSubmit:this.onFormSubmit,movie:this.state.selectedMovie});case"edit":return n.a.createElement($,{modalOpen:this.state.modalOpen,modalClose:this.clearForm,onFormCancel:this.clearForm,handleFormSubmit:this.onFormSubmit,movie:this.state.selectedMovie})}}},{key:"render",value:function(){var e=this;return n.a.createElement("main",{className:"movies-container"},this.props.moviesList.map(function(t){return n.a.createElement(Y,Object.assign({},t,{onDeleteMovie:e.handleClickOnDelete,handleClickOnEdit:e.onEditMovie,key:t.imdbID}))}),n.a.createElement(w,{className:"add-btn",icon:"plus",onClick:this.onAddMovie}),this.state.modalOpen?this.renderForm():null,n.a.createElement(P,{className:"popup",modalOpen:this.state.popupOpen,modalClose:this.togglePopup},n.a.createElement("p",null," Are you sure you want to delete this movie?"),n.a.createElement("footer",{className:"popup-buttons"},n.a.createElement(w,{onClick:function(t){return e.confirmDeletion(t)},label:"OK"}),n.a.createElement(w,{onClick:this.togglePopup,label:"Cancel"}))))}}]),t}(r.Component),X=Object(p.b)(function(e){return{moviesList:e.moviesList,loading:e.loading}})(K),Q=(a(157),a(53)),Z=a.n(Q),ee=function(){return n.a.createElement("header",{className:"app-header"},n.a.createElement("img",{className:"logo",src:Z.a,alt:"logo"}),n.a.createElement("h1",null," Movies-Library "))},te=F(),ae=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement(p.a,{store:te},n.a.createElement(r.Fragment,null,n.a.createElement(X,null),n.a.createElement(ee,null)))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},51:function(e,t,a){e.exports=a.p+"static/media/defaultBackground.a20a164c.jpg"},53:function(e,t,a){e.exports=a.p+"static/media/cinema.1e00f685.png"},55:function(e,t,a){e.exports=a(160)},60:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){},87:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){}},[[55,2,1]]]);
//# sourceMappingURL=main.83313d6b.chunk.js.map